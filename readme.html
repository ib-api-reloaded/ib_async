<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ib_async &mdash; ib_async 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
    <link rel="canonical" href="https://ib-api-reloaded.github.io/ib_asyncreadme.html"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=8d563738"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API docs" href="api.html" />
    <link rel="prev" title="Contents" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            ib_async
          </a>
              <div class="version">
                1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">ib_async</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#update">Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#build-manually">Build Manually</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installing-only-library">Installing Only Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-everything-enable-docs-dev-testing">Install Everything (enable docs + dev testing)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#generate-docs">Generate Docs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#check-types">Check Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="#build-package">Build Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="#upload-package-if-maintaining">Upload Package (if maintaining)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example">Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#documentation">Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#community-resources">Community Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="#disclaimer">Disclaimer</a></li>
<li class="toctree-l2"><a class="reference internal" href="#history">History</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="notebooks.html">Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes.html">Code recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="code.html">Source code</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html"><code class="docutils literal notranslate"><span class="pre">ib_async</span></code> Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="links.html">Links</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ib_async</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">ib_async</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/readme.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p><a class="reference external" href="https://github.com/ib-api-reloaded/ib_async/actions"><img alt="Build" src="https://github.com/ib-api-reloaded/ib_async/actions/workflows/test.yml/badge.svg?branch=next" /></a> <a class="reference internal" href="#"><span class="xref myst"><img alt="PyVersion" src="https://img.shields.io/badge/python-3.10+-blue.svg" /></span></a> <!-- [![Status](https://img.shields.io/badge/status-beta-green.svg)](#) --> <a class="reference external" href="https://pypi.python.org/pypi/ib_async"><img alt="PyPiVersion" src="https://img.shields.io/pypi/v/ib_async.svg" /></a> <a class="reference internal" href="#"><span class="xref myst"><img alt="License" src="https://img.shields.io/badge/license-BSD-blue.svg" /></span></a> <!-- [![Downloads](https://static.pepy.tech/badge/ib-insync)](https://pepy.tech/project/ib-insync) --> <a class="reference external" href="https://ib-api-reloaded.github.io/ib_async/"><img alt="Docs" src="https://img.shields.io/badge/Documentation-green.svg" /></a></p>
<section id="ib-async">
<h1>ib_async<a class="headerlink" href="#ib-async" title="Link to this heading"></a></h1>
<section id="update">
<h2>Update<a class="headerlink" href="#update" title="Link to this heading"></a></h2>
<p>Under new management. See <a class="reference external" href="https://github.com/mattsta/ib_insync/discussions">original discussions</a> for recent history. Create new discussions or PRs or issues under <a class="reference external" href="https://github.com/ib-api-reloaded/ib_async">the new primary repo</a> for ongoing updates.</p>
<p>New contributions welcome. We are open to adding more maintainers with commit access if your updates and understanding of IBKR/TWS and Python are all high quality.</p>
<p>This is a small project with a userbase of widely varying experience and knowledge, so if you open issues which are more about IBKR problems and less about client problems, we may not be able to assist you unless your problem is a direct client issue and not one of many IBKR API edge cases. Feel free to open <a class="reference external" href="https://github.com/ib-api-reloaded/ib_async/discussions">Discussion topics</a> about anything if you are unsure about a problem being IBKR, our client, or your own code usage.</p>
</section>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading"></a></h2>
<p>The goal of the <code class="docutils literal notranslate"><span class="pre">ib_async</span></code> library is to make working with the
<a class="reference external" href="https://ibkrcampus.com/ibkr-api-page/twsapi-doc/">Trader Workstation API</a>
from Interactive Brokers as easy as possible.</p>
<p>The main features are:</p>
<ul class="simple">
<li><p>An easy to use linear style of programming;</p></li>
<li><p>An <a class="reference external" href="https://ib-api-reloaded.github.io/ib_async/api.html#module-ib_async.ib">IB component</a>
that automatically keeps in sync with the TWS or IB Gateway application;</p></li>
<li><p>A fully asynchonous framework based on
<a class="reference external" href="https://docs.python.org/3/library/asyncio.html">asyncio</a>
and
<a class="reference external" href="https://github.com/erdewit/eventkit">eventkit</a>
for advanced users;</p></li>
<li><p>Interactive operation with live data in Jupyter notebooks.</p></li>
</ul>
<p>Be sure to take a look at the
<a class="reference external" href="https://ib-api-reloaded.github.io/ib_async/notebooks.html">notebooks</a>,
the <a class="reference external" href="https://ib-api-reloaded.github.io/ib_async/recipes.html">recipes</a>
and the <a class="reference external" href="https://ib-api-reloaded.github.io/ib_async/api.html">API docs</a>.</p>
</section>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Link to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">ib_async</span>
</pre></div>
</div>
<p>Requirements:</p>
<ul class="simple">
<li><p>Python 3.10 or higher</p>
<ul>
<li><p>We plan to support Python releases <a class="reference external" href="https://devguide.python.org/versions/">2 years back</a> which allows us to continue adding newer features and performance improvements over time.</p></li>
</ul>
</li>
<li><p>A running IB Gateway application (or TWS with API mode enabled)</p>
<ul>
<li><p><a class="reference external" href="https://www.interactivebrokers.com/en/trading/ibgateway-stable.php">stable gateway</a> — updated every few months</p></li>
<li><p><a class="reference external" href="https://www.interactivebrokers.com/en/trading/ibgateway-latest.php">latest gateway</a> — updated weekly</p></li>
</ul>
</li>
<li><p>Make sure the <a class="reference external" href="https://ibkrcampus.com/ibkr-api-page/twsapi-doc/#tws-download">API port is enabled</a> and ‘Download open orders on connection’ is checked.</p></li>
<li><p>You may also want to increase the Java memory usage under <code class="docutils literal notranslate"><span class="pre">Configure-&gt;Settings-&gt;Memory</span> <span class="pre">Allocation</span></code> to 4096 MB minimum to prevent gateway crashes when loading bulk data.</p></li>
</ul>
<p>The ibapi package from IB is not needed. <code class="docutils literal notranslate"><span class="pre">ib_async</span></code> implements the full IBKR API protocol internally.</p>
</section>
<section id="build-manually">
<h2>Build Manually<a class="headerlink" href="#build-manually" title="Link to this heading"></a></h2>
<p>First, install poetry:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">poetry</span> <span class="o">-</span><span class="n">U</span>
</pre></div>
</div>
<section id="installing-only-library">
<h3>Installing Only Library<a class="headerlink" href="#installing-only-library" title="Link to this heading"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">poetry</span> <span class="n">install</span>
</pre></div>
</div>
</section>
<section id="install-everything-enable-docs-dev-testing">
<h3>Install Everything (enable docs + dev testing)<a class="headerlink" href="#install-everything-enable-docs-dev-testing" title="Link to this heading"></a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">poetry</span> <span class="n">install</span> <span class="o">--</span><span class="k">with</span><span class="o">=</span><span class="n">docs</span><span class="p">,</span><span class="n">dev</span>
</pre></div>
</div>
</section>
</section>
<section id="generate-docs">
<h2>Generate Docs<a class="headerlink" href="#generate-docs" title="Link to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">poetry</span> <span class="n">install</span> <span class="o">--</span><span class="k">with</span><span class="o">=</span><span class="n">docs</span>
<span class="n">poetry</span> <span class="n">run</span> <span class="n">sphinx</span><span class="o">-</span><span class="n">build</span> <span class="o">-</span><span class="n">b</span> <span class="n">html</span> <span class="n">docs</span> <span class="n">html</span>
</pre></div>
</div>
</section>
<section id="check-types">
<h2>Check Types<a class="headerlink" href="#check-types" title="Link to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">poetry</span> <span class="n">run</span> <span class="n">mypy</span> <span class="n">ib_async</span>
</pre></div>
</div>
</section>
<section id="build-package">
<h2>Build Package<a class="headerlink" href="#build-package" title="Link to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">poetry</span> <span class="n">build</span>
</pre></div>
</div>
</section>
<section id="upload-package-if-maintaining">
<h2>Upload Package (if maintaining)<a class="headerlink" href="#upload-package-if-maintaining" title="Link to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">poetry</span> <span class="n">install</span>
<span class="n">poetry</span> <span class="n">config</span> <span class="n">pypi</span><span class="o">-</span><span class="n">token</span><span class="o">.</span><span class="n">pypi</span> <span class="n">your</span><span class="o">-</span><span class="n">api</span><span class="o">-</span><span class="n">token</span>
<span class="n">poetry</span> <span class="n">publish</span> <span class="o">--</span><span class="n">build</span>
</pre></div>
</div>
</section>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="Link to this heading"></a></h2>
<p>This is a complete script to download historical data:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ib_async</span> <span class="kn">import</span> <span class="o">*</span>
<span class="c1"># util.startLoop()  # uncomment this line when in a notebook</span>

<span class="n">ib</span> <span class="o">=</span> <span class="n">IB</span><span class="p">()</span>
<span class="n">ib</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="mi">7497</span><span class="p">,</span> <span class="n">clientId</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">ib</span><span class="o">.</span><span class="n">reqMarketDataType</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>  <span class="c1"># Use free, delayed, frozen data</span>
<span class="n">contract</span> <span class="o">=</span> <span class="n">Forex</span><span class="p">(</span><span class="s1">&#39;EURUSD&#39;</span><span class="p">)</span>
<span class="n">bars</span> <span class="o">=</span> <span class="n">ib</span><span class="o">.</span><span class="n">reqHistoricalData</span><span class="p">(</span>
    <span class="n">contract</span><span class="p">,</span> <span class="n">endDateTime</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">durationStr</span><span class="o">=</span><span class="s1">&#39;30 D&#39;</span><span class="p">,</span>
    <span class="n">barSizeSetting</span><span class="o">=</span><span class="s1">&#39;1 hour&#39;</span><span class="p">,</span> <span class="n">whatToShow</span><span class="o">=</span><span class="s1">&#39;MIDPOINT&#39;</span><span class="p">,</span> <span class="n">useRTH</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># convert to pandas dataframe (pandas needs to be installed):</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">df</span><span class="p">(</span><span class="n">bars</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>                   <span class="n">date</span>      <span class="nb">open</span>      <span class="n">high</span>       <span class="n">low</span>     <span class="n">close</span>  <span class="n">volume</span>
<span class="mi">0</span>   <span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">19</span> <span class="mi">23</span><span class="p">:</span><span class="mi">15</span><span class="p">:</span><span class="mi">00</span>  <span class="mf">1.107875</span>  <span class="mf">1.108050</span>  <span class="mf">1.107725</span>  <span class="mf">1.107825</span>      <span class="o">-</span><span class="mi">1</span>
<span class="mi">1</span>   <span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">20</span> <span class="mi">00</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>  <span class="mf">1.107825</span>  <span class="mf">1.107925</span>  <span class="mf">1.107675</span>  <span class="mf">1.107825</span>      <span class="o">-</span><span class="mi">1</span>
<span class="mi">2</span>   <span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">20</span> <span class="mi">01</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>  <span class="mf">1.107825</span>  <span class="mf">1.107975</span>  <span class="mf">1.107675</span>  <span class="mf">1.107875</span>      <span class="o">-</span><span class="mi">1</span>
<span class="mi">3</span>   <span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">20</span> <span class="mi">02</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>  <span class="mf">1.107875</span>  <span class="mf">1.107975</span>  <span class="mf">1.107025</span>  <span class="mf">1.107225</span>      <span class="o">-</span><span class="mi">1</span>
<span class="mi">4</span>   <span class="mi">2019</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">20</span> <span class="mi">03</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>  <span class="mf">1.107225</span>  <span class="mf">1.107725</span>  <span class="mf">1.107025</span>  <span class="mf">1.107525</span>      <span class="o">-</span><span class="mi">1</span>
<span class="o">..</span>                  <span class="o">...</span>       <span class="o">...</span>       <span class="o">...</span>       <span class="o">...</span>       <span class="o">...</span>     <span class="o">...</span>
<span class="mi">705</span> <span class="mi">2020</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">02</span> <span class="mi">14</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span>  <span class="mf">1.119325</span>  <span class="mf">1.119675</span>  <span class="mf">1.119075</span>  <span class="mf">1.119225</span>      <span class="o">-</span><span class="mi">1</span>
</pre></div>
</div>
</section>
<section id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Link to this heading"></a></h2>
<p>The complete <a class="reference external" href="https://ib-api-reloaded.github.io/ib_async/api.html">API documentation</a>.</p>
<p><a class="reference external" href="https://ib-api-reloaded.github.io/ib_async/changelog.html">Changelog</a>.</p>
</section>
<section id="community-resources">
<h2>Community Resources<a class="headerlink" href="#community-resources" title="Link to this heading"></a></h2>
<p>If you have other public work related to <code class="docutils literal notranslate"><span class="pre">ib_async</span></code> or <code class="docutils literal notranslate"><span class="pre">ib_insync</span></code> open an issue and we can keep an active list here.</p>
<p>Projects below are not endorsed by any entity and are purely for reference or entertainment purposes.</p>
<ul class="simple">
<li><p>Adi’s livestream VODs about using IBKR APIs: <a class="reference external" href="https://www.youtube.com/playlist?list=PLCZZtBmmgxn8CFKysCkcl-B1tqRgCCNIX">Interactive Brokers API in Python</a></p></li>
<li><p>Matt’s IBKR python CLI: <a class="reference external" href="http://github.com/mattsta/icli">icli</a></p></li>
<li><p>Corporate data parsing via IBKR API: <a class="reference external" href="https://github.com/quantbelt/ib_fundamental">ib_fundamental</a></p></li>
</ul>
</section>
<section id="disclaimer">
<h2>Disclaimer<a class="headerlink" href="#disclaimer" title="Link to this heading"></a></h2>
<p>The software is provided on the conditions of the simplified BSD license.</p>
<p>This project is not affiliated with Interactive Brokers Group, Inc.</p>
<p><a class="reference external" href="https://ibkrcampus.com/ibkr-api-page/twsapi-doc/">Official Interactive Brokers API Docs</a></p>
</section>
<section id="history">
<h2>History<a class="headerlink" href="#history" title="Link to this heading"></a></h2>
<p>This library was originally created by <a class="reference external" href="https://github.com/erdewit">Ewald de Wit</a> as <a class="reference external" href="https://github.com/erdewit/tws_async"><code class="docutils literal notranslate"><span class="pre">tws_async</span></code> in early-2017</a> then became the more prominent <a class="reference external" href="https://github.com/erdewit/ib_insync"><code class="docutils literal notranslate"><span class="pre">ib_insync</span></code> library in mid-2017</a>. He maintained and improved the library for the world to use for free until his unexpected passing in early 2024. Afterward, we decided to rename the project to <code class="docutils literal notranslate"><span class="pre">ib_async</span></code> under a new github organization since we lost access to modify anything in the original repos and packaging and docs infrastructure.</p>
<p>The library is currently maintained by <a class="reference external" href="https://github.com/mattsta">Matt Stancliff</a> and we are open to adding more committers and org contributors if people show interest in helping out.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Contents" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="api.html" class="btn btn-neutral float-right" title="API docs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>